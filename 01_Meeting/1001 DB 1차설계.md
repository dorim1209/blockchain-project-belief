## 데이터 베이스 설계 (10.10)

- DB : MySQL 5.7

 ![1001  1차 db 설계도](https://user-images.githubusercontent.com/47456161/65949229-bd9d7e80-e476-11e9-9dec-e607881646d1.png)

## MEMBER: 사원과 관련한 테이블이다.

- MEMBER_NO: 사원 번호(사번)으로 MEMBER 테이블의 primary key 값이다. 100부터 시작하는 값으로 auto_increment 옵션이 설정되어 있다.
- MEMBER_NAME: 사원의 이름이다.
- DEPT_CODE: 사원의 부서 번호이다. DEPT 테이블에 같은 이름으로 외래키이다. 현재 개발 기준으로 2개의 부서가 설정되어 있다.
- RANK_CODE: 사원의 직급이다. RANK 테이블에 같은 이름으로 외래키이다. 현재 개발 기준으로 2단계가 있으며 숫자가 높을수록 높은 직급이다. 
- PASSWORD: 사원이 자신의 근무시간을 조회하고자 할 때, 인증할 때 사용하는 비밀번호이다. 

```mysql
CREATE TABLE `member` (
  `MEMBER_NO` int(11) NOT NULL AUTO_INCREMENT,
  `MEMBER_NAME` varchar(32) NOT NULL,
  `RANK_CODE` int(11) NOT NULL,
  `DEPT_CODE` int(11) NOT NULL,
  `PWD` varchar(32) NOT NULL,
  PRIMARY KEY (`MEMBER_NO`)
) ENGINE=InnoDB DEFAULT 
```



 

 

### DEPT : 부서 이름과 코드가 맵핑된 테이블이다.

- DEPT_CODE: 부서 코드번호이다. 테이블의 pimary_key 값이다.
- DEPT_NAME: 부서 이름이다.

```mysql
CREATE TABLE `dept` (
  `DEPT_CODE` int(11) NOT NULL,
  `DEPT_NAME` varchar(45) NOT NULL,
  PRIMARY KEY (`DEPT_CODE`)
) ENGINE=InnoDB DEFAULT 
```



### RANK: 직급 이름과 코드가 맵핑된 테이블이다.

- RANK_CODE: 직급 코드 번호이다. primary key이다. 숫자가 높을수록 높은 권한을 가진다.
- RANK_NAME: 직급명이다.

```mysql
CREATE TABLE `rank` (
  `RANK_CODE` int(11) NOT NULL,
  `RANK_NAME` varchar(45) NOT NULL,
  PRIMARY KEY (`RANK_CODE`)
) ENGINE=InnoDB DEFAULT 
```



### APPROVAL: 사전에 승인된 휴가자, 외근, 출장 목록을 보여주는 테이블이다.

- APPROVAL_NO: 이벤트 승인 번호를 뜻한다. primary key로 사용된다.
- MEMBER_NO: 사번으로 외래키이다.
- DATE: 이벤트가 일어나는 날짜를 뜻한다. 예) 9월 29일
- HOUR: 이벤트가 일어나는 시간을 뜻한다. 예) 12시~18시
- STATUS: 이벤트 종류를 뜻한다. STATUS 테이블의 외래키 값이다. 예) 휴가, 출장 등등

```mysql
CREATE TABLE `approval` (
  `APPROVAL_NO` int(11) NOT NULL,
  `MEMBER_NO` int(11) NOT NULL,
  `DATE` datetime NOT NULL,
  `HOURS` datetime NOT NULL,
  `STATUS_CODE` int(11) NOT NULL,
  PRIMARY KEY (`APPROVAL_NO`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
```



### STATUS: 이벤트 타입과 이름을 맵핑한 테이블이다.

- STATUS_CODE: primary key 값으로 사용된다.
- STATUS_NAME: 이벤트 종류를 뜻한다.

```mysql
CREATE TABLE `status` (
  `STATUS_CODE` int(11) NOT NULL AUTO_INCREMENT,
  `STATUS_NAME` varchar(32) DEFAULT NULL,
  PRIMARY KEY (`STATUS_CODE`)
) ENGINE=InnoDB DEFAULT
```



### ENTERANCE: 출입 기록을 관리하는 테이블이다.

- ENTERANCE_NO: primary 값으로 사용된다. 
- MEBER_NO: 사번을 외래키로 사용한다.
- TIMESTAMP: NFC카드를 이용해 출입문에 접근했을 때 서버시간을 기록한다.
- EXISTANCE: 출입기록이 발생했을 때 출입(TRUE)인지 퇴실(FALSE)인지 알려주는 boolean type의 값이다.

```mysql
CREATE TABLE `enterance` (
  `ENTERANCE_NO` int(11) NOT NULL AUTO_INCREMENT,
  `MEMBER_NO` int(11) NOT NULL,
  `TIMESTAMP` datetime DEFAULT NULL,
  `EXISTANCE` tinyint(1) DEFAULT NULL,
  PRIMARY KEY (`ENTERANCE_NO`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8
```

